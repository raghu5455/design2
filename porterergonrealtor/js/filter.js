var app=new Vue({name:"Vue Price Range",el:"#app",data:{min:1,max:10,minValue:1,maxValue:10,step:1,totalSteps:0,percentPerStep:1,trackWidth:null,isDragging:!1,pos:{curTrack:null}},methods:{moveTrack(t,e){let i=this.getPercentInPx(),s=Math.round(this.$refs._vpcTrack.getBoundingClientRect().left),r,a=(e.clientX-s)/i;if(a<1||a>100)return;let c=Math.round(a/this.percentPerStep)*this.step+this.min;if("track1"===t){if(c>=this.maxValue-this.step)return;this.minValue=c}if("track2"===t){if(c<=this.minValue+this.step)return;this.maxValue=c}this.$refs[t].style.left=a+"%",this.setTrackHightlight()},mousedown(t,e){this.isDragging||(this.isDragging=!0,this.pos.curTrack=e)},touchstart(t,e){this.mousedown(t,e)},mouseup(t,e){this.isDragging&&(this.isDragging=!1)},touchend(t,e){this.mouseup(t,e)},mousemove(t,e){this.isDragging&&this.moveTrack(e,t)},touchmove(t,e){this.mousemove(t.changedTouches[0],e)},valueToPercent(t){return(t-this.min)/this.step*this.percentPerStep},setTrackHightlight(){this.$refs.trackHighlight.style.left=this.valueToPercent(this.minValue)+"%",this.$refs.trackHighlight.style.width=this.valueToPercent(this.maxValue)-this.valueToPercent(this.minValue)+"%"},getPercentInPx(){return this.$refs._vpcTrack.offsetWidth/this.totalSteps/this.percentPerStep},setClickMove(t){let e=this.$refs.track1.getBoundingClientRect().left,i=this.$refs.track2.getBoundingClientRect().left;t.clientX<e?this.moveTrack("track1",t):t.clientX-e<i-t.clientX?this.moveTrack("track1",t):this.moveTrack("track2",t)}},mounted(){this.totalSteps=(this.max-this.min)/this.step,this.percentPerStep=100/this.totalSteps,document.querySelector(".track1").style.left=this.valueToPercent(this.minValue)+"%",document.querySelector(".track2").style.left=this.valueToPercent(this.maxValue)+"%",this.setTrackHightlight();var t=this;["mouseup","mousemove"].forEach(e=>{document.body.addEventListener(e,i=>{t.isDragging&&t.pos.curTrack&&t[e](i,t.pos.curTrack)})}),["mousedown","mouseup","mousemove","touchstart","touchmove","touchend"].forEach(e=>{document.querySelector(".track1").addEventListener(e,i=>{i.stopPropagation(),t[e](i,"track1")}),document.querySelector(".track2").addEventListener(e,i=>{i.stopPropagation(),t[e](i,"track2")})}),document.querySelector(".track").addEventListener("click",function(e){e.stopPropagation(),t.setClickMove(e)}),document.querySelector(".track-highlight").addEventListener("click",function(e){e.stopPropagation(),t.setClickMove(e)})}}),app=new Vue({name:"Vue Price Range",el:"#app1",data:{min:1,max:10,minValue:1,maxValue:10,step:1,totalSteps:0,percentPerStep:1,trackWidth:null,isDragging:!1,pos:{curTrack:null}},methods:{moveTrack(t,e){let i=this.getPercentInPx(),s=Math.round(this.$refs._vpcTrack.getBoundingClientRect().left),r,a=(e.clientX-s)/i;if(a<1||a>100)return;let c=Math.round(a/this.percentPerStep)*this.step+this.min;if("track1"===t){if(c>=this.maxValue-this.step)return;this.minValue=c}if("track2"===t){if(c<=this.minValue+this.step)return;this.maxValue=c}this.$refs[t].style.left=a+"%",this.setTrackHightlight()},mousedown(t,e){this.isDragging||(this.isDragging=!0,this.pos.curTrack=e)},touchstart(t,e){this.mousedown(t,e)},mouseup(t,e){this.isDragging&&(this.isDragging=!1)},touchend(t,e){this.mouseup(t,e)},mousemove(t,e){this.isDragging&&this.moveTrack(e,t)},touchmove(t,e){this.mousemove(t.changedTouches[0],e)},valueToPercent(t){return(t-this.min)/this.step*this.percentPerStep},setTrackHightlight(){this.$refs.trackHighlight.style.left=this.valueToPercent(this.minValue)+"%",this.$refs.trackHighlight.style.width=this.valueToPercent(this.maxValue)-this.valueToPercent(this.minValue)+"%"},getPercentInPx(){return this.$refs._vpcTrack.offsetWidth/this.totalSteps/this.percentPerStep},setClickMove(t){let e=this.$refs.track1.getBoundingClientRect().left,i=this.$refs.track2.getBoundingClientRect().left;t.clientX<e?this.moveTrack("track1",t):t.clientX-e<i-t.clientX?this.moveTrack("track1",t):this.moveTrack("track2",t)}},mounted(){this.totalSteps=(this.max-this.min)/this.step,this.percentPerStep=100/this.totalSteps,document.querySelector(".track1").style.left=this.valueToPercent(this.minValue)+"%",document.querySelector(".track2").style.left=this.valueToPercent(this.maxValue)+"%",this.setTrackHightlight();var t=this;["mouseup","mousemove"].forEach(e=>{document.body.addEventListener(e,i=>{t.isDragging&&t.pos.curTrack&&t[e](i,t.pos.curTrack)})}),["mousedown","mouseup","mousemove","touchstart","touchmove","touchend"].forEach(e=>{document.querySelector(".track1").addEventListener(e,i=>{i.stopPropagation(),t[e](i,"track1")}),document.querySelector(".track2").addEventListener(e,i=>{i.stopPropagation(),t[e](i,"track2")})}),document.querySelector(".track").addEventListener("click",function(e){e.stopPropagation(),t.setClickMove(e)}),document.querySelector(".track-highlight").addEventListener("click",function(e){e.stopPropagation(),t.setClickMove(e)})}});